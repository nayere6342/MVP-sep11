<!DOCTYPE html>
<html>
<head>
	<title>mygame</title>
</head>
<body>
	<script src="main.js"></script>

	<script type="module">
	import kaboom from "https://unpkg.com/kaboom@3000.0.1/dist/kaboom.mjs";
		// Collision handling

			// Start kaboom
			kaboom({
				background: [201,253,224]
			})

			// Load assets
			loadSprite("player", "/sprites/8bit-player.png")
			loadSprite("coin", "/sprites/8bit-coin.png")
			loadSprite("base", "/sprites/8bit-baseline.png")
			loadSprite("plate", "/sprites/8bit-plateform.png")
			loadSprite("fire", "/sprites/8bit-fire.png")
			loadSprite("backdrop", "/sprites/8bit-backdrop.png")


			// Define player movement speed
			const SPEED = 520
			setGravity(2300)
			// Add player game object
			const player = add([
				sprite("player"),
				scale(.1),
				pos(100, 400),
				color(),
				rotate(0),
				area(),
				body(),
			])

			// Register input handlers & movement
			onKeyDown("a", () => {
				player.move(-SPEED, 0)
			})

			onKeyDown("d", () => {
				player.move(SPEED, 0)
			})

					onKeyPress("space", () => {
			if (player.isGrounded()) {
				player.jump()
			}
		})

			onKeyDown("s", () => {
				player.move(0, SPEED)
			})

			// onKeyDown("q", () => {
			// 	player.angle -= SPEED * dt()
			// })

			// onKeyDown("e", () => {
			// 	player.angle += SPEED * dt()
			// })

			// Add enemies
			for (let i = 0; i < 3; i++) {

				const x = rand(0, width())
				const y = rand(0, height())

				add([
					sprite("coin"),
					scale(.3),
					pos(-900,-900),
					area(),
					"coin",
				])

			}




			function spawnTree() {
				add([
					sprite("base"),
					scale(.3),
					area(),
					body({ isStatic: true }),
					pos(width(), height() - 10),
					anchor("botleft"),
					move(LEFT, 540),
					"base",
				]);
				wait(rand(.4, .4), () => {
					spawnTree();
					// destroy(grass)
				});
			}

				spawnTree();
				add([
				sprite("plate"),
				scale(.2),
				pos(40,420),
				area(),
				body({ isStatic: true }),
				"plate",
			])



			function spawnDead() {
				add([
					sprite("coin"),
					scale(.4),
					area(),
					body({ isStatic: true }),
					pos(width(), height() - 90),
					anchor("botleft"),
					move(LEFT, 540),
					"coin",
				]);
				wait(rand(1, 1.8), () => {
					spawnDead();
					// destroy(grass)
				});
			}

				spawnDead();
				add([
				sprite("coin"),
				scale(.4),
				pos(500,-200),
				area(),
				body({ isStatic: true }),
				"coin",
			])




			// add([
			// 	sprite("steel"),
			// 	scale(8),
			// 	pos(100, 800),
			// 	area(),
			// 	body({ mass: 1 }),
			// ])






			player.onCollide("coin", (enemy) => {
				destroy(bean)
			})


			player.onCollideUpdate("coin'", () => {
			})




		</script>

</body>
</html>
